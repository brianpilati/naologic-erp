<div class="timeline">
  <div class="naologic-container">
    <img src="naologic.png" class="naologic-logo" />
  </div>

  <!-- Header -->
  <erp-timeline-controller
    class="timeline-controller"
    [zoomLevel]="timelineService.zoomLevel()"
    (zoomChange)="onZoomChange($event)" />

  <div class="timeline-body">
    <div class="timeline-left">
      <div class="work-center-header">
        <div class="work-center-header-label">Work Center</div>
      </div>

      @for (center of workCenters(); track center.docId) {
        <div class="timeline-row">
          {{ center.data.name }}
        </div>
      }
    </div>

    <erp-timeline-grid class="timeline-right" [columns]="timelineService.columns()" [workCenters]="workCenters()">
      @for (center of workCenters(); track center.docId; let index = $index) {
        <div class="timeline-row" (click)="onCreateAt(timelineService.xToDate($event.offsetX), center.docId)">
          @for (order of workOrdersForCenter(center); track order.docId) {
            <erp-work-order-bar
              [order]="order"
              (edit)="onEdit(order)"
              (delete)="onDelete(order.docId)"
              [topPx]="index === 0 ? 12 : 6" />
          }
        </div>
      }
    </erp-timeline-grid>
  </div>

  <!-- Slide-out Create/Edit Panel -->
  @if (isPanelOpen()) {
    <div class="panel-backdrop" [class.is-closing]="isPanelClosing()" (click)="closePanel()"></div>

    <erp-work-order-panel
      class="work-order-panel"
      [class.is-open]="!isPanelOpening() && !isPanelClosing()"
      [class.is-closing]="isPanelClosing()"
      (close)="closePanel()" />
  }
</div>
